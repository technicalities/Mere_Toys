<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
><head
  ><title
    >Installation</title
    ><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"
     /><meta name="generator" content="pandoc"
     /><meta name="author" content="John T. O'Donnell"
     /><meta name="date" content="2009"
     /></head
  ><body
  ><link rel="stylesheet" href="style.css" type="text/css" media="all" /><h1 class="title"
    >Installation</h1
    ><div id="toc"
    ><ul
      ><li
	><a href="#installation" id="TOC-installation"
	  >Installation</a
	  ><ul
	  ><li
	    ><a href="#quick-start" id="TOC-quick-start"
	      >Quick start</a
	      ></li
	    ><li
	    ><a href="#requirements" id="TOC-requirements"
	      >Requirements</a
	      ></li
	    ><li
	    ><a href="#installation-on-gnulinux" id="TOC-installation-on-gnulinux"
	      >Installation on Gnu/Linux</a
	      ><ul
	      ><li
		><a href="#required-software" id="TOC-required-software"
		  >Required software</a
		  ><ul
		  ><li
		    ><a href="#haskell-compiler-ghc" id="TOC-haskell-compiler-ghc"
		      >Haskell compiler: ghc</a
		      ></li
		    ><li
		    ><a href="#graphical-user-interface-gtk2hs" id="TOC-graphical-user-interface-gtk2hs"
		      >Graphical user interface: gtk2hs</a
		      ></li
		    ><li
		    ><a href="#additional-haskell-packages" id="TOC-additional-haskell-packages"
		      >Additional Haskell packages</a
		      ></li
		    ></ul
		  ></li
		><li
		><a href="#building-and-installing-hydra" id="TOC-building-and-installing-hydra"
		  >Building and installing Hydra</a
		  ></li
		><li
		><a href="#testing" id="TOC-testing"
		  >Testing</a
		  ></li
		><li
		><a href="#running-hydra-from-the-source-directory" id="TOC-running-hydra-from-the-source-directory"
		  >Running Hydra from the source directory</a
		  ></li
		></ul
	      ></li
	    ><li
	    ><a href="#installation-on-windows-xp" id="TOC-installation-on-windows-xp"
	      >Installation on Windows XP</a
	      ><ul
	      ><li
		><a href="#required-software-1" id="TOC-required-software-1"
		  >Required software</a
		  ><ul
		  ><li
		    ><a href="#haskell-compiler-ghc-1" id="TOC-haskell-compiler-ghc-1"
		      >Haskell compiler: ghc</a
		      ></li
		    ><li
		    ><a href="#graphical-user-interface-gtk2hs-1" id="TOC-graphical-user-interface-gtk2hs-1"
		      >Graphical user interface: gtk2hs</a
		      ></li
		    ><li
		    ><a href="#additional-haskell-packages-1" id="TOC-additional-haskell-packages-1"
		      >Additional Haskell packages</a
		      ></li
		    ></ul
		  ></li
		><li
		><a href="#building-and-installing-hydra-1" id="TOC-building-and-installing-hydra-1"
		  >Building and installing Hydra</a
		  ></li
		><li
		><a href="#testing-1" id="TOC-testing-1"
		  >Testing</a
		  ></li
		></ul
	      ></li
	    ><li
	    ><a href="#package-development-and-maintainance" id="TOC-package-development-and-maintainance"
	      >Package development and maintainance</a
	      ></li
	    ></ul
	  ></li
	></ul
      ></div
    ><h1 id="installation"
    ><a href="#TOC-installation"
      >Installation</a
      ></h1
    ><hr
     /><h2 id="quick-start"
    ><a href="#TOC-quick-start"
      >Quick start</a
      ></h2
    ><p
    >On Linux, you can compile and install using the following commands:</p
    ><pre
    ><code
      > runhaskell Setup configure --user
 runhaskell Setup build
 runhaskell Setup haddock --css=doc/style.css
 runhaskell Setup install
</code
      ></pre
    ><p
    >On Windows, copy and unzip the binary installation into your file space.</p
    ><p
    >For some explanation and further details, read the following sections.</p
    ><hr
     /><h2 id="requirements"
    ><a href="#TOC-requirements"
      >Requirements</a
      ></h2
    ><p
    >In order to build the system, the following additional software is required:</p
    ><ul
    ><li
      ><p
	>ghc is a Haskell compiler.</p
	></li
      ><li
      ><p
	>gtk2hs is a toolkit for building graphical user interfaces.</p
	></li
      ><li
      ><p
	>haddock produces hyperlinked documentation of library code.</p
	></li
      ><li
      ><p
	>pandoc generates html documentation from plain text input.</p
	></li
      ></ul
    ><p
    >Tested with ghc-6.10.3</p
    ><hr
     /><h2 id="installation-on-gnulinux"
    ><a href="#TOC-installation-on-gnulinux"
      >Installation on Gnu/Linux</a
      ></h2
    ><h3 id="required-software"
    ><a href="#TOC-required-software"
      >Required software</a
      ></h3
    ><h4 id="haskell-compiler-ghc"
    ><a href="#TOC-haskell-compiler-ghc"
      >Haskell compiler: ghc</a
      ></h4
    ><p
    >Find out whether ghc is already installed on your system by entering the command ghci. If it's already there, then skip the rest of this section.</p
    ><pre
    ><code
      > $ ghci
 GHCi, version 6.10.1: http://www.haskell.org/ghc/  :? for help
 Loading package ghc-prim ... linking ... done.
 Loading package integer ... linking ... done.
 Loading package base ... linking ... done.
 Prelude&gt; 
</code
      ></pre
    ><p
    >If the compiler isn't already there, you can download and install it. Visit the Glasgow Haskell Compiler web page and follow the installation instructions there:</p
    ><pre
    ><code
      > www.haskell.org/ghc/
</code
      ></pre
    ><h4 id="graphical-user-interface-gtk2hs"
    ><a href="#TOC-graphical-user-interface-gtk2hs"
      >Graphical user interface: gtk2hs</a
      ></h4
    ><p
    >Download and install gtk2hs-0.10.1</p
    ><pre
    ><code
      > ./configure --enable-docs -with-user-pkgconf --prefix=$HOME
 gmake
 gmake install
</code
      ></pre
    ><h4 id="additional-haskell-packages"
    ><a href="#TOC-additional-haskell-packages"
      >Additional Haskell packages</a
      ></h4
    ><p
    >First, download and install Cabal, e.g. Cabal-1.6.0.2. Follow the instructions in README.</p
    ><p
    >Then install pandoc using cabal, with the following shell command:</p
    ><pre
    ><code
      > cabal install pandoc
</code
      ></pre
    ><h3 id="building-and-installing-hydra"
    ><a href="#TOC-building-and-installing-hydra"
      >Building and installing Hydra</a
      ></h3
    ><p
    >Download the Hydra software. It consists of a single tarball file, with a name of the form Hydra-<version>.tar.gz. For example version 1.2.3 would have the filename Hydra-1.2.3.tar.gz.</p
    ><p
    >Open a shell and change to the directory containing the tarball. Enter the following commands, replacing <version> with the actual version number of the file.</p
    ><pre
    ><code
      > tar -xzf Hydra-&lt;version&gt;.tar.gz
 cd Hydra-&lt;version&gt;
 runhaskell Setup configure --with-compiler=ghc-6.10.1 --user
 runhaskell Setup build
 runhaskell Setup haddock --css=doc/style.css
 runhaskell Setup install
</code
      ></pre
    ><p
    >These commands will install Hydra in the standard location within the user file space. You do not need special &quot;root&quot; privilege to do the installation, but the software will not be accessible to other users. On a personal computer, this is normally the best choice.</p
    ><p
    >If you want to install Hydra in the system file space, it will be available to all users, but you need root privilege to carry out the last step (install). A system installation is appropriate for a networked system. To do this, omit the --user option from the first step (configure).</p
    ><h3 id="testing"
    ><a href="#TOC-testing"
      >Testing</a
      ></h3
    ><p
    >To test the installation, you can run one of the examples packaged with Hydra. Create a working directory in your filespace, and copy an example circuit into it:</p
    ><pre
    ><code
      > mkdir MyCircuits
 cd MyCircuits
 cp Hydra-&lt;version&gt;/examples/Multiply.hs .
</code
      ></pre
    ><p
    >The example file, Multiply.hs, contains a specification of a digital circuit that multiplies binary numbers, a simulation driver, and sample test data. The following commands run the simulation. The first step is to launch ghci, the interactive Haskell implementation, with the Hydra package preloaded. After ghci starts, load the example file, and then run the simulation by entering main. You can exit ghci by entering :quit.</p
    ><pre
    ><code
      > ghci -package Hydra
 :load Multiply
 main
 :quit
</code
      ></pre
    ><h3 id="running-hydra-from-the-source-directory"
    ><a href="#TOC-running-hydra-from-the-source-directory"
      >Running Hydra from the source directory</a
      ></h3
    ><p
    >It isn't necessary to install Hydra as a package visible to ghc, or to use the cabal tools. This section shows how to use it directly from the source directory. All you need is to have a working ghc installation (so the ghci command starts the interactive system), and a directory containing the Hydra source.</p
    ><p
    >Obtain the Hydra software from /users/staff/jtod/public/hydra. It consists of a single tarball file, with a name of the form</p
    ><pre
    ><code
      >Hydra-&lt;version&gt;.tar.gz
</code
      ></pre
    ><p
    >For example version 0.3.2 has the filename Hydra-0.3.2.tar.gz. Unpack the file:</p
    ><pre
    ><code
      > tar -xzf Hydra-&lt;version&gt;.tar.gz
</code
      ></pre
    ><p
    >Change to the directory containing your project. Your source module needs to import Hydra. Launch ghci:</p
    ><pre
    ><code
      >ghci -i/home/mylogin/Hydra-0.3.2/
</code
      ></pre
    ><p
    >If you like, you can define an alias so it isn't necessary to type such a long command to launch the system. If you use the bash shell, add this to your .bashrc file:</p
    ><pre
    ><code
      >alias hydra='ghci -i/home/mylogin/Hydra-0.3.2/'
</code
      ></pre
    ><p
    >To test the installation, you can run one of the examples packaged with Hydra. Create a working directory in your filespace, and copy an example circuit into it:</p
    ><pre
    ><code
      > mkdir MyCircuits
 cd MyCircuits
 cp Hydra-&lt;version&gt;/examples/Multiply.hs .
</code
      ></pre
    ><p
    >The example file, Multiply.hs, contains a specification of a digital circuit that multiplies binary numbers, a simulation driver, and sample test data. The following commands run the simulation. The first step is to launch ghci with the Hydra package preloaded. After ghci starts, load the example file, and then run the simulation by entering main. You can exit ghci by entering :quit.</p
    ><pre
    ><code
      > hydra
 :load Multiply
 main
 :quit
</code
      ></pre
    ><hr
     /><h2 id="installation-on-windows-xp"
    ><a href="#TOC-installation-on-windows-xp"
      >Installation on Windows XP</a
      ></h2
    ><h3 id="required-software-1"
    ><a href="#TOC-required-software-1"
      >Required software</a
      ></h3
    ><h4 id="haskell-compiler-ghc-1"
    ><a href="#TOC-haskell-compiler-ghc-1"
      >Haskell compiler: ghc</a
      ></h4
    ><h4 id="graphical-user-interface-gtk2hs-1"
    ><a href="#TOC-graphical-user-interface-gtk2hs-1"
      >Graphical user interface: gtk2hs</a
      ></h4
    ><h4 id="additional-haskell-packages-1"
    ><a href="#TOC-additional-haskell-packages-1"
      >Additional Haskell packages</a
      ></h4
    ><h3 id="building-and-installing-hydra-1"
    ><a href="#TOC-building-and-installing-hydra-1"
      >Building and installing Hydra</a
      ></h3
    ><p
    >Download the Hydra software. It consists of a single tarball file, with a name of the form Hydra-<version>.tar.gz. For example version 1.2.3 would have the filename Hydra-1.2.3.tar.gz.</p
    ><p
    >Open a command prompt window. Change to the directory containing the tarball, and enter the following commands, replacing <version> with the actual version number of the file. This will install Hydra into the standard location.</p
    ><pre
    ><code
      > runhaskell Setup configure
 runhaskell Setup build
 runhaskell Setup haddock --css=doc/style.css
 runhaskell Setup install
</code
      ></pre
    ><p
    >You can also install the application in some other location in the file system. To do so, first decide where you want to put the application, for example &quot;C: Documents&quot;. Now enter the following commands in a command prompt (you need to be in the source folder):</p
    ><pre
    ><code
      > runhaskell Setup configure --prefix=&quot;chosen location&quot;
 runhaskell Setup build
 runhaskell Setup haddock --css=doc/style.css
 runhaskell Setup install
</code
      ></pre
    ><p
    >The result of this is a binary installation, consisting of a single folder named Hydra-<verstion> in the location that you chose. This binary installation is not the same as the source folder Hydra-w.x.y that you are using for the installation.</p
    ><p
    >You can now move or copy the binary installation folder to some other location, and it will continue to work. This is because Windows allows a program to find out its file location: when you launch Hydra, it will determine where it is, and then access its data files relative to its own location. In other words, the application is relocatable. (Unfortunately, applications on linux are not relocatable.) This approach is useful if you want to build the application folder on your own computer, and then copy it onto a shared file system so others can use it.</p
    ><p
    >First download the Hydra source directory, put it somewhere in your file space, and unzip it. Thus you will have a folder with a name like Hydra-1.2.3, where 1.2.3 is the version number. In a command Prompt shell window, navigate to the folder that contains the package, for example</p
    ><pre
    ><code
      > C:    (this switches you from whatever default disk you're on to the C disk)
 cd Docum&lt;tab&gt;  (the &lt;tab&gt; key will complete the name automatically, so you don't have to type long names)
 cd jtod  (my user name)
 cd My Do&lt;tab&gt;
 cd Hydra
 cd Hydra-1.2.3
</code
      ></pre
    ><p
    >Decide where you want to put the installation, for example in a folder &quot;ghc&quot; within another folder &quot;installs&quot; in your My Documents folder. The full name of this location is</p
    ><pre
    ><code
      > C:\Documents and Settings\myusername\My Documents\installs\ghc
</code
      ></pre
    ><p
    >Of course, replace myusername with <em
      >your</em
      > username!</p
    ><p
    >That location is only an example; the installation can go anywhere. The location of the installation is distinct from the folder containing the package folder that you downloaded: to &quot;install a package&quot; means to copy its key files into their final place on the disk, from where they can be executed.</p
    ><p
    >Now enter the following commands. The first one says where to put the installation; thus --prefix=<location> means that the specified location will contain the installed files. If this location contains spaces, then it needs to be placed inside double-quote marks &quot;path with spaces&quot;.</p
    ><pre
    ><code
      > &quot;C:\Documents and Settings\myusername\My Documents\installs\ghc&quot;


 runhaskell Setup configure --user --prefix=&quot;C:\...location...&quot;
 runhaskell Setup build
 runhaskell Setup install --user
</code
      ></pre
    ><p
    >The final installation step will tell you where the files have been placed:</p
    ><pre
    ><code
      > Installing library in ... (ghc knows how to find the Hydra library here)
 Installing executables in C:\Documents and Settings\myusername\My Documents\installs\ghc\bin
</code
      ></pre
    ><p
    >Putting C: into Environment Variables, so it can be found to execute</p
    ><pre
    ><code
      > Start : My Computer (right click)
 brings up System Properties dialog box, click Advanced tab
 click Environment Variables
 select variable Path, then click Edit
 Insert C:\Documents and Settings\myusername\My Documents\installs\ghc\bin in the Variable value
      text entry (the entries are separated by semicolon  ;) 
</code
      ></pre
    ><p
    >There are several ways to launch the application:</p
    ><ul
    ><li
      ><p
	>Click Start, Run... In the &quot;Open&quot; text entry, type the name of the program, e.g. HydraEmu, and it should launch</p
	></li
      ><li
      ><p
	>In a Command Prompt window, type the name of the program</p
	></li
      ><li
      ><p
	>Click My Computer, click Local Disk (C:), click ghc, click bin, then click the icon for the program (its Type is Application)</p
	></li
      ></ul
    ><h3 id="testing-1"
    ><a href="#TOC-testing-1"
      >Testing</a
      ></h3
    ><hr
     /><h2 id="package-development-and-maintainance"
    ><a href="#TOC-package-development-and-maintainance"
      >Package development and maintainance</a
      ></h2
    ><pre
    ><code
      > runhaskell Setup sdist --snapshot     {create a tar file}
 runhaskell Setup clean                {remove files built by cabal}
</code
      ></pre
    ></body
  ></html
>
